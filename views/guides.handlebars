<div class="container">
    <div class="row">
        <div class="col-12">
            <p>
                <a href="/guides/popular" class="text-dark">Guides</a>
            </p>
        </div>
        <div class="col-md-3 mb-1">
            <select id="selectFilter" class="form-control form-control-sm">
                <option value="popular">Popular</option>
                <option value="recent" selected>Recent</option>
            </select>
        </div>
        <div class="col-md-7">
            <div class="input-group mb-1">
                <input type="text" class="form-control form-control-sm align-bottom" id="searchPost" aria-describedby="SearchPost"
                    placeholder="Search...">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary btn-sm" type="button"><span class="mdi mdi-magnify"></span></button>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <button class="btn btn-success btn-sm btn-block mb-3 float-right" type="button"><span class="mdi mdi-plus"></span>
                Create</button>
        </div>
        <div class="col">
            <div class="table-responsive">
                <table class="table table-hover">
                    <tbody>
                        {{#each guides}}
                        <tr>
                            <th class="font-weight-normal align-middle"><a href="/guide/{{_id}}">{{title}}</a></th>
                            <th class="text-muted small text-right align-middle"><span class="mdi mdi-thumb-up"></span>
                                21</th>
                            <th class="text-muted small text-right align-middle"><a class="text-muted" href="#">{{author}}</a><br>7
                                days ago</th>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>

                {{pages}}
                <nav aria-label="Page navigation">
                    <ul class="pagination pagination-sm justify-content-center" id="page_nav">
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
<script>
    'use strict'
    var page = {{{ page }}}
    var totalPages = {{{ totalPages }}}
    var filter = '{{{reqFilter}}}'

    if (page <= 1)
        $('#page_nav').append('<li class="page-item disabled"><a class="page-link" href="#" tabindex="-1">Previous</a></li>')
    else
        $('#page_nav').append(`<li class="page-item"><a class="page-link" href="/guides/${filter}/?page=${page - 1}" tabindex="-1">Previous</a></li>`)

    if (page <= totalPages && page >= 2)
        $('#page_nav').append(`<li class="page-item"><a class="page-link" href="/guides/${filter}/?page=${page - 1}">${page - 1}</a></li>`)

    $('#page_nav').append(`<li class="page-item active"><a class="page-link" href="/guides/${filter}/?page=${page}">${page}</a></li>`)

    if ((page + 1) <= totalPages)
        $('#page_nav').append(`<li class="page-item"><a class="page-link" href="/guides/${filter}/?page=${page + 1}">${page + 1}</a></li>`)

    if ((page + 2) <= totalPages)
        $('#page_nav').append(`<li class="page-item"><a class="page-link" href="/guides/${filter}/?page=${page + 2}">${page + 2}</a></li>`)




    if (page >= totalPages)
        $('#page_nav').append(`<li class="page-item disabled"><a class="page-link" href="#">Next</a></li>`)
    else {
        $('#page_nav').append(`<li class="page-item disabled"><a class="page-link" href="#">...</a></li>`)
        $('#page_nav').append(`<li class="page-item"><a class="page-link" href="/guides/${filter}/?page=${totalPages}">${totalPages}</a></li>`)
        $('#page_nav').append(`<li class="page-item"><a class="page-link" href="/guides/${filter}/?page=${page + 1}">Next</a></li>`)
    }

    $(document).ready(() => {
        $('#selectFilter').val(filter)

        $("#selectFilter").change(function () {
            document.location.href = '/guides/'+this.value;
        });
    })

</script>